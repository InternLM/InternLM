import numpy as np
import json

def save_json(data, path_with_filename):
    json_data = json.dumps(data)
    path_with_filename += '.json'
    with open(path_with_filename, 'w') as file:
        file.write(json_data)

def load_json(path_with_filename):
    path_with_filename += '.json'
    with open(path_with_filename, 'r') as file:
        data = json.load(file)
    
    return data

def cal_var_data(data1, data2):
    values1 = np.array(list(data1.values()))
    values2 = np.array(list(data2.values()))
    variance = np.var(values1 - values2)
    print("data1和data2之间的方差:", variance)
    return variance

if __name__ == '__main__':
    data1 = {'step0': 11.641907691955566, 'step1': 11.610807418823242, 'step2': 11.500190734863281, 'step3': 11.125123977661133, 'step4': 10.216903686523438, 'step5': 9.895318031311035, 'step6': 8.725019454956055, 'step7': 8.54189682006836, 'step8': 8.014242172241211, 'step9': 7.3317413330078125, 'step10': 6.988274574279785, 'step11': 7.185131549835205, 'step12': 6.672039031982422, 'step13': 6.5038299560546875, 'step14': 6.485091686248779, 'step15': 6.574605941772461, 'step16': 5.69890022277832, 'step17': 7.024624824523926, 'step18': 6.7667036056518555, 'step19': 6.468381881713867, 'step20': 6.1953535079956055, 'step21': 6.732409477233887, 'step22': 6.616427421569824, 'step23': 5.764975070953369, 'step24': 5.798764228820801, 'step25': 6.344103813171387, 'step26': 6.264080047607422, 'step27': 6.140008926391602, 'step28': 6.039471626281738, 'step29': 5.81962776184082, 'step30': 5.294787883758545, 'step31': 5.602631092071533, 'step32': 5.40096378326416, 'step33': 4.74159049987793, 'step34': 5.820371627807617, 'step35': 5.063955307006836, 'step36': 5.458918571472168, 'step37': 4.814183235168457, 'step38': 5.976807117462158, 'step39': 4.735713958740234, 'step40': 5.002490520477295, 'step41': 5.6309990882873535, 'step42': 5.4741034507751465, 'step43': 5.204842567443848, 'step44': 4.7434916496276855, 'step45': 4.64813232421875, 'step46': 4.289896011352539, 'step47': 3.963658332824707, 'step48': 2.7819247245788574, 'step49': 3.188966751098633, 'step50': 2.357077121734619, 'step51': 1.548568606376648, 'step52': 2.4536895751953125, 'step53': 1.7658560276031494, 'step54': 1.4738256931304932, 'step55': 0.7163310050964355, 'step56': 1.449487328529358, 'step57': 0.8412836194038391, 'step58': 1.3254996538162231, 'step59': 0.8332417607307434, 'step60': 0.3786698877811432, 'step61': 0.9018588066101074, 'step62': 0.7389585971832275, 'step63': 0.5223253965377808, 'step64': 0.48523229360580444, 'step65': 0.4049224853515625, 'step66': 0.33038046956062317, 'step67': 0.2113477885723114, 'step68': 0.15930715203285217, 'step69': 0.05125141888856888, 'step70': 0.0930347889661789, 'step71': 0.056432582437992096, 'step72': 0.019383318722248077, 'step73': 0.01620332896709442, 'step74': 0.018504168838262558, 'step75': 0.019146736711263657, 'step76': 0.017933402210474014, 'step77': 0.015571961179375648, 'step78': 0.0165984109044075, 'step79': 0.012194955721497536, 'step80': 0.013318149372935295, 'step81': 0.011358737014234066, 'step82': 0.009666802361607552, 'step83': 0.011286848224699497, 'step84': 0.011896143667399883, 'step85': 0.010745598003268242, 'step86': 0.010907930321991444, 'step87': 0.010436870157718658, 'step88': 0.009329047985374928, 'step89': 0.008757514879107475, 'step90': 0.01110609620809555, 'step91': 0.009157547727227211, 'step92': 0.013033551163971424, 'step93': 0.01322629302740097, 'step94': 0.011271358467638493, 'step95': 0.009748865850269794, 'step96': 0.011616823263466358, 'step97': 0.010054178535938263, 'step98': 0.00812087208032608, 'step99': 0.009054436348378658, 'step100': 0.008552240207791328}
    data2 = {'step0': 11.641907691955566, 'step1': 11.61075210571289, 'step2': 11.500173568725586, 'step3': 11.125143051147461, 'step4': 10.216898918151855, 'step5': 9.895370483398438, 'step6': 8.725010871887207, 'step7': 8.542009353637695, 'step8': 8.014204025268555, 'step9': 7.331656455993652, 'step10': 6.9883198738098145, 'step11': 7.185116767883301, 'step12': 6.672039985656738, 'step13': 6.5038628578186035, 'step14': 6.485067367553711, 'step15': 6.574695587158203, 'step16': 5.698987007141113, 'step17': 7.024575233459473, 'step18': 6.766698360443115, 'step19': 6.468293190002441, 'step20': 6.195263385772705, 'step21': 6.732343673706055, 'step22': 6.6164398193359375, 'step23': 5.76494836807251, 'step24': 5.798725128173828, 'step25': 6.344111919403076, 'step26': 6.264074325561523, 'step27': 6.140057563781738, 'step28': 6.03947639465332, 'step29': 5.819766998291016, 'step30': 5.294614791870117, 'step31': 5.602657318115234, 'step32': 5.400937080383301, 'step33': 4.7416181564331055, 'step34': 5.820409297943115, 'step35': 5.063880920410156, 'step36': 5.458887100219727, 'step37': 4.8139543533325195, 'step38': 5.97745418548584, 'step39': 4.735681056976318, 'step40': 5.002812385559082, 'step41': 5.630942344665527, 'step42': 5.47648286819458, 'step43': 5.204328536987305, 'step44': 4.744075298309326, 'step45': 4.633545875549316, 'step46': 4.259111404418945, 'step47': 4.021927833557129, 'step48': 2.790250778198242, 'step49': 3.204498529434204, 'step50': 2.3651649951934814, 'step51': 1.5592949390411377, 'step52': 2.4865965843200684, 'step53': 1.7563960552215576, 'step54': 1.481992244720459, 'step55': 0.7558983564376831, 'step56': 1.4205610752105713, 'step57': 0.8062829971313477, 'step58': 1.4997068643569946, 'step59': 0.8555845618247986, 'step60': 0.678583562374115, 'step61': 0.6189221143722534, 'step62': 0.6690669059753418, 'step63': 0.551539957523346, 'step64': 0.5499024391174316, 'step65': 0.3430316746234894, 'step66': 0.2918548285961151, 'step67': 0.23460753262043, 'step68': 0.1576860100030899, 'step69': 0.048661187291145325, 'step70': 0.09473774582147598, 'step71': 0.0607699416577816, 'step72': 0.01893688179552555, 'step73': 0.014599641785025597, 'step74': 0.01856464147567749, 'step75': 0.01787991262972355, 'step76': 0.017706777900457382, 'step77': 0.015515356324613094, 'step78': 0.016702260822057724, 'step79': 0.012185963802039623, 'step80': 0.013218613341450691, 'step81': 0.011237604543566704, 'step82': 0.009773047640919685, 'step83': 0.011055674403905869, 'step84': 0.011947952210903168, 'step85': 0.010753706097602844, 'step86': 0.011036706157028675, 'step87': 0.010576458647847176, 'step88': 0.009339386597275734, 'step89': 0.008735204115509987, 'step90': 0.01131620816886425, 'step91': 0.009011978283524513, 'step92': 0.012804820202291012, 'step93': 0.013191153295338154, 'step94': 0.01141147967427969, 'step95': 0.00984649546444416, 'step96': 0.011482877656817436, 'step97': 0.0101022282615304, 'step98': 0.008060554042458534, 'step99': 0.009139291942119598, 'step100': 0.008419621735811234}
    save_json(data1, 'data1')
    save_json(data2, 'data2')
    d1 = load_json('data1')
    d2 = load_json('data2')
    variance = cal_var_data(d1, d2) #0.002238444418824614